<div class="archived-documents-container" dir="rtl">
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>

  <div class="page-header flex items-center justify-between mb-6">
    <div>
      <h1 class="page-title text-4xl font-bold text-blue-900 mb-1"> {{'Archive Documents'|translate}} </h1>
      <p class="page-subtitle text-lg text-gray-500"> {{'Documents that have been archived'|translate}} </p>
    </div>
    <i class="pi pi-archive text-blue-200 text-6xl"></i>
  </div>

  <p-card styleClass="main-content-card shadow-lg rounded-xl">
    <ng-template pTemplate="content">
      <div *ngIf="loading" class="loading-state flex flex-col items-center py-16">
        <p-progressSpinner styleClass="w-6rem h-6rem" strokeWidth="5" fill="var(--surface-ground)" animationDuration=".8s"></p-progressSpinner>
        <p class="text-xl text-gray-600 mt-5">جاري تحميل المستندات المؤرشفة...</p>
      </div>

      <div *ngIf="!loading && error" class="error-state flex flex-col items-center py-16">
        <i class="pi pi-exclamation-triangle text-red-500 text-6xl mb-4"></i>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">حدث خطأ</h3>
        <p class="text-red-600 text-lg font-medium">{{ error }}</p>
        <p-button label="إعادة المحاولة" icon="pi pi-refresh" (onClick)="fetchArchivedDocuments()" styleClass="mt-5 p-button-secondary p-button-outlined"></p-button>
      </div>

      <div *ngIf="!loading && !error && archivedDocuments.length === 0" class="empty-state flex flex-col items-center py-20">
        <i class="pi pi-archive text-gray-300 text-8xl mb-6"></i>
        <h3 class="text-3xl font-bold text-gray-800 mb-3"> {{'The archive is empty'|translate}} </h3>
        <p class="text-gray-600 text-xl"> {{'There are no archived documents currently.'|translate}} </p>
      </div>

      <div *ngIf="!loading && !error && archivedDocuments.length > 0" class="documents-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 py-6">
        <p-card *ngFor="let doc of archivedDocuments" styleClass="document-item-card shadow-md rounded-lg hover:shadow-xl transition-shadow duration-200">
          <ng-template pTemplate="content">
            <div class="document-item-content flex items-center gap-4 p-4">
              <div class="document-icon-wrapper flex-shrink-0 bg-blue-50 rounded-full p-4">
                <i class="pi pi-file text-blue-500 text-3xl"></i>
              </div>
              <div class="document-details flex-1">
                <h3 class="document-title text-xl font-semibold text-gray-800 mb-1 truncate">{{ doc.fileName }}</h3>
                <p class="document-filename text-sm text-gray-500 mb-2">{{ doc.fileType }}</p>
                <div class="document-meta-badges flex gap-2 mb-2">
                  <span class="tag-badge bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs">{{ doc.tag }}</span>
                  <span class="privacy-badge bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs">{{ doc.privacy }}</span>
                </div>
              </div>
             
            </div>
          </ng-template>
        </p-card>
      </div>
    </ng-template>
  </p-card>
</div>