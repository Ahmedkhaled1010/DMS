<!-- Archived Documents Page -->
<div class="archived-documents-container" dir="rtl">
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>

  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-left">
        <div class="icon-wrapper">
          <i class="pi pi-archive header-icon"></i>
        </div>
        <div>
          <h1 class="page-title">{{'Archive Documents'|translate}}</h1>
          <p class="page-subtitle">{{'Documents that have been archived'|translate}}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Card -->
  <div class="main-content-card">
    <div class="card-content">
      <!-- Loading State -->
      <div *ngIf="loading" class="loading-state">
        <i class="pi pi-spinner pi-spin loading-spinner"></i>
        <p class="loading-text">{{'Loading archived documents...'|translate}}</p>
      </div>

      <!-- Error State -->
      <div *ngIf="!loading && error" class="error-state">
        <i class="pi pi-exclamation-triangle error-icon"></i>
        <h3 class="error-title">حدث خطأ</h3>
        <p class="error-message">{{ error }}</p>
        <button (click)="fetchArchivedDocuments()" class="retry-button">
          <i class="pi pi-refresh"></i> {{'Retry'|translate}}
        </button>
      </div>

      <!-- Empty State -->
      <div *ngIf="!loading && !error && archivedDocuments.length === 0" class="empty-state">
        <i class="pi pi-archive empty-icon"></i>
        <h3 class="empty-title">{{'The archive is empty'|translate}}</h3>
        <p class="empty-message">{{'There are no archived documents currently.'|translate}}</p>
      </div>

      <!-- Documents Grid -->
      <div *ngIf="!loading && !error && archivedDocuments.length > 0" class="documents-grid">
        <div *ngFor="let doc of archivedDocuments; " class="document-card">
          <div class="card-header">
            <div class="doc-icon-wrapper">
              <i class="fas doc-icon"
                 [class.fa-file-pdf]="doc.fileType === 'application/pdf'"
                 [class.fa-file-word]="doc.fileType === 'application/msword'"
                 [class.fa-file-alt]="doc.fileType === 'text/plain'"
                 [class.fa-music]="doc.fileType === 'audio/ogg'"
                 [class.fa-file-image]="doc.fileType === 'image/png'||doc.fileType === 'image/jpeg'||doc.fileType === 'image/gif'"
                 [class.fa-file]="doc.fileType === 'other'"></i>
             
            </div>
            <div class="doc-actions">
              <button (click)="restoreDocument(doc.id)" class="action-button restore-button" title="{{'Restore'|translate}}" [disabled]="restoringDocumentId === doc.id">
                <i class="pi pi-undo"></i>
              </button>
              <button (click)="confirmPermanentDelete($event, doc.id, doc.fileName)" class="action-button delete-button" title="{{'Delete Permanently'|translate}}" >
                <i class="pi pi-times"></i>
              </button>
            </div>
          </div>
          <h3 class="doc-title">{{ doc.fileName }}</h3>
          <p class="doc-description">{{ doc.fileType || ('No description available'|translate) }}</p>
          <div class="doc-meta">
            <span><i class="pi pi-calendar"></i> {{ doc.createdAt | date:'shortDate' }}</span>
            <span *ngIf="doc.size"><i class="pi pi-database"></i> {{ doc.size }}</span>
            <span class="tag-badge" *ngIf="doc.tag">{{ doc.tag }}</span>
            <span class="privacy-badge" *ngIf="doc.privacy">{{ doc.privacy }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
