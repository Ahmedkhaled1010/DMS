<p-dialog
  header="Upload New Document"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '50vw' }"
  [draggable]="false"
  [resizable]="false"
  (onHide)="onModalHide()"
  styleClass="file-upload-dialog"
>
  <div class="space-y-6">
    <div class="space-y-2">
      <label for="file-upload" class="block text-sm font-medium text-gray-700">Select File(s)</label>
      <p-fileUpload
        name="demo[]"
        customUpload="true"
        (onSelect)="onFileSelect($event)"
        [multiple]="true"
        accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png"
        [maxFileSize]="10000000"
        chooseLabel="Choose File"
        uploadLabel="Upload"
        cancelLabel="Cancel"
        [showUploadButton]="false"
        [showCancelButton]="false"
        styleClass="custom-fileupload"
      >
        <ng-template pTemplate="content">
          <div
            class="flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer"
          >
            <i class="pi pi-cloud-upload text-4xl text-gray-400 mb-3"></i>
            <p class="text-gray-600 text-sm mb-2">
              Drag and drop your file(s) here, or
              <span class="text-blue-600 font-medium">browse</span>
            </p>
            <p class="text-xs text-gray-500">
              Max file size: 10MB per file. Allowed types: PDF, DOC, XLS, PPT, Images.
            </p>
            <div *ngIf="uploadedFiles.length > 0" class="mt-4 w-full">
              <p class="text-sm font-medium text-gray-800 mb-2">Selected Files:</p>
              <ul class="list-disc list-inside text-sm text-gray-700 max-h-24 overflow-y-auto">
                <li *ngFor="let file of uploadedFiles">
                  {{ file.name }} ({{ file.size | number : "1.0-0" }} bytes)
                </li>
              </ul>
            </div>
          </div>
        </ng-template>
      </p-fileUpload>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="space-y-2">
        <label for="folder-select" class="block text-sm font-medium text-gray-700">Select Folder</label>
        <p-dropdown
          id="folder-select"
          [options]="folders"
          [(ngModel)]="selectedFolder"
          optionLabel="name"
          placeholder="Choose a folder"
          [showClear]="true"
          styleClass="w-full custom-dropdown"
        ></p-dropdown>
      </div>

      <div class="space-y-2">
        <label for="workspace-select" class="block text-sm font-medium text-gray-700">Select Workspace</label>
        <p-dropdown
          id="workspace-select"
          [options]="workspaces"
          [(ngModel)]="selectedWorkspace"
          optionLabel="name"
          placeholder="Choose a workspace"
          [showClear]="true"
          styleClass="w-full custom-dropdown"
        ></p-dropdown>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancel"
      icon="pi pi-times"
      (click)="visible = false"
      styleClass="p-button-secondary p-button-text"
    ></p-button>
    <p-button
      label="Upload"
      icon="pi pi-upload"
      (click)="onUploadClick()"
      [disabled]="uploadedFiles.length === 0 ||( !selectedFolder && !selectedWorkspace)">
    </p-button>
  </ng-template>
</p-dialog>

<p-toast></p-toast>
