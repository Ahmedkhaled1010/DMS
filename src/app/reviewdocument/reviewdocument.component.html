<!-- Document Review Page -->
<div class="min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
  
  <!-- Header with Controls -->
  <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        
        <!-- Left Side: File Info -->
        <div class="flex items-center space-x-4">
          <button 
            (click)="goBack()"
            class="p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
            <i class="fas fa-arrow-left text-lg"></i>
          </button>
          
          <div class="flex items-center space-x-3" *ngIf="documentData">
            <!-- File Type Badge -->
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                  [ngClass]="{
                    'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200': documentType === 'pdf',
                    'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200': documentType === 'image',
                    'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': documentType === 'video',
                    'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': documentType === 'audio',
                    'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200': documentType === 'office',
                    'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200': documentType === 'text' || documentType === 'unknown'
                  }">
              {{ getFileTypeBadge() }}
            </span>
            
            <!-- File Info -->
            <div class="min-w-0 flex-1">
              <h2 class="text-lg font-semibold text-gray-900 dark:text-white truncate">
                {{ documentData.fileName }}
              </h2>
              <p class="text-sm text-gray-500 dark:text-gray-400">
                {{ getFileSize() }}
              </p>
            </div>
          </div>
        </div>

        <!-- Right Side: Action Buttons -->
        <div class="flex items-center space-x-2" *ngIf="documentData && isSupported()">
          
          <!-- Zoom Controls (for images and PDFs) -->
          <div *ngIf="documentType === 'image' || documentType === 'pdf'" class="flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
            <button 
              (click)="zoomOut()"
              [disabled]="zoomLevel <= 0.5"
              class="p-1.5 rounded text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
              <i class="fas fa-search-minus text-sm"></i>
            </button>
            
            <span class="px-2 text-sm font-medium text-gray-700 dark:text-gray-300 min-w-[3rem] text-center">
              {{ (zoomLevel * 100) | number:'1.0-0' }}%
            </span>
            
            <button 
              (click)="zoomIn()"
              [disabled]="zoomLevel >= 3"
              class="p-1.5 rounded text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
              <i class="fas fa-search-plus text-sm"></i>
            </button>
            
            <button 
              (click)="resetZoom()"
              class="p-1.5 rounded text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-600 transition-colors">
              <i class="fas fa-expand-arrows-alt text-sm"></i>
            </button>
          </div>

          <!-- Action Buttons -->
          <button 
            (click)="printDocument()"
            class="p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
            title="Print Document">
            <i class="fas fa-print text-lg"></i>
          </button>
          
          <button 
            (click)="downloadDocument()"
            class="p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
            title="Download Document">
            <i class="fas fa-download text-lg"></i>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="flex-1 p-4">
    <div class="max-w-7xl mx-auto">
      
      <!-- Loading State -->
      <div *ngIf="isLoading" class="flex items-center justify-center min-h-[60vh]">
        <div class="text-center">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
          <p class="text-gray-600 dark:text-gray-400">Loading document...</p>
        </div>
      </div>

      <!-- Error State -->
      <div *ngIf="error" class="flex items-center justify-center min-h-[60vh]">
        <div class="text-center max-w-md">
          <div class="w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-400 text-2xl"></i>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Error Loading Document</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-4">{{ error }}</p>
          <button 
            (click)="goBack()"
            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
            Go Back
          </button>
        </div>
      </div>

      <!-- Unsupported File Type -->
      <div *ngIf="!isLoading && !error && !isSupported()" class="flex items-center justify-center min-h-[60vh]">
        <div class="text-center max-w-md">
          <div class="w-16 h-16 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-file text-yellow-600 dark:text-yellow-400 text-2xl"></i>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Preview Not Available</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-4">This file type cannot be previewed in the browser.</p>
          <div class="space-y-2">
            <button 
              (click)="downloadDocument()"
              class="block w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
              <i class="fas fa-download mr-2"></i>
              Download File
            </button>
            <button 
              (click)="goBack()"
              class="block w-full px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors">
              Go Back
            </button>
          </div>
        </div>
      </div>

      <!-- Document Preview -->
      <div *ngIf="!isLoading && !error && isSupported() && documentUrl" class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
        
        <!-- PDF Viewer -->
        <div *ngIf="documentType === 'pdf'" class="w-full h-[80vh]">
          <iframe 
            [src]="documentUrl"
            class="w-full h-full border-0"
            title="PDF Document">
          </iframe>
        </div>

        <!-- Image Viewer -->
        <div *ngIf="documentType === 'image'" class="p-4">
          <div class="flex justify-center items-center min-h-[60vh] overflow-auto">
            <img 
              [src]="documentUrl"
              [alt]="documentData?.fileName"
              class="max-w-full h-auto transition-transform duration-200 shadow-lg rounded"
              [style.transform]="'scale(' + zoomLevel + ')'">
          </div>
        </div>

        <!-- Video Viewer -->
        <div *ngIf="documentType === 'video'" class="p-4">
          <div class="flex justify-center items-center">
            <video 
              [src]="documentUrl"
              controls
              class="max-w-full max-h-[70vh] rounded-lg shadow-lg"
              preload="metadata">
              Your browser does not support the video tag.
            </video>
          </div>
        </div>

        <!-- Audio Viewer -->
        <div *ngIf="documentType === 'audio'" class="p-8">
          <div class="flex flex-col items-center space-y-6">
            <div class="w-32 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-xl">
              <i class="fas fa-music text-white text-4xl"></i>
            </div>
            <div class="text-center">
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">{{ documentData?.fileName }}</h3>
              <p class="text-gray-600 dark:text-gray-400">{{ getFileSize() }}</p>
            </div>
            <audio 
              [src]="documentUrl"
              controls
              class="w-full max-w-md"
              preload="metadata">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>

        <!-- Text Viewer -->
        <div *ngIf="documentType === 'text'" class="p-6">
          <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 font-mono text-sm overflow-auto max-h-[70vh]">
            <iframe 
              [src]="documentUrl"
              class="w-full h-full min-h-[60vh] border-0"
              title="Text Document">
            </iframe>
          </div>
        </div>

        <!-- Office Document Viewer -->
        <div *ngIf="documentType === 'office'" class="w-full h-[80vh]">
          <div class="flex flex-col items-center justify-center h-full p-8 space-y-6">
            <div class="w-24 h-24 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center shadow-xl">
              <i class="fas fa-file-alt text-white text-3xl"></i>
            </div>
            <div class="text-center max-w-md">
              <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Office Document</h3>
              <p class="text-gray-600 dark:text-gray-400 mb-6">
                {{ documentData?.fileName }} ({{ getFileSize() }})
              </p>
              <p class="text-sm text-gray-500 dark:text-gray-500 mb-6">
                Office documents require download to view properly. Click the download button to save the file to your device.
              </p>
              <div class="space-y-3">
                <button 
                  (click)="downloadDocument()"
                  class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold">
                  <i class="fas fa-download mr-2"></i>
                  Download Document
                </button>
                <button 
                  (click)="goBack()"
                  class="w-full px-6 py-3 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors">
                  Go Back
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
